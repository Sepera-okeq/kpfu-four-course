# Защищенный чат с аутентификацией

Клиент-клиентское приложение с защищенным обменом сообщениями в едином окне с перемещаемыми док-виджетами.

## Основные функции

- Регистрация и аутентификация пользователей
- Метод слова-вызова для аутентификации
- Алгоритм Диффи-Хеллмана для обмена ключами
- Шифрование сообщений алгоритмом RC4
- Электронно-цифровая подпись (ЭЦП) файлов методом RSA
- Просмотр базы данных в реальном времени

## Требования

- Python 3.7+
- PyQt5

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Запуск приложения

Запустите единое приложение:
```bash
python main.py
```

Откроется главное окно с тремя док-виджетами, которые можно свободно перемещать, группировать и изменять размер:

1. **Клиент 1 (Сервер)** - серверная часть с обработкой подключений
2. **Клиент 2** - клиентская часть с регистрацией и чатом
3. **База данных** - просмотр пользователей в реальном времени

Особенности интерфейса:
- Каждый компонент можно перетаскивать в любую часть окна
- Поддерживается группировка компонентов
- Возможность сворачивания/разворачивания док-виджетов
- Гибкая настройка расположения под свои предпочтения

## Использование

### Док-виджет "Клиент 1 (Сервер)"
- Автоматически запускается и ожидает подключений
- Отображает лог событий и сообщения чата
- Обрабатывает все криптографические операции

### Док-виджет "Клиент 2"
1. Регистрация:
   - Нажмите "Регистрация"
   - Заполните логин и пароль
   - Нажмите "Зарегистрироваться"

2. Вход:
   - Введите логин и пароль
   - Происходит аутентификация по слову-вызову
   - После входа активируется чат

3. Чат:
   - Отправка зашифрованных сообщений
   - Отправка файлов с ЭЦП
   - Все сообщения шифруются RC4

### Док-виджет "База данных"
- Автоматическое обновление каждую секунду
- Отображение всех пользователей
- Просмотр хэшей паролей и слов-вызова
- Время действия слов-вызова

## Безопасность

- Хэширование паролей: SHA-256
- Слово-вызов: 128 бит, время жизни 24 часа
- Диффи-Хеллман: 512-битное простое число
- Шифрование сообщений: RC4
- ЭЦП файлов: RSA
- Подробное логирование всех операций

## Структура проекта

- `main.py` - Главное приложение с док-виджетами
- `client1.py` - Серверная часть
- `client2.py` - Клиентская часть
- `database.py` - Работа с SQLite
- `crypto.py` - Криптографические функции
- `logger.py` - Система логирования
- `db_viewer.py` - Просмотр базы данных

## Логирование

Логи в директории `logs`:
- `main_YYYYMMDD_HHMMSS.log`
- `client1_YYYYMMDD_HHMMSS.log`
- `client2_YYYYMMDD_HHMMSS.log`
- `database_YYYYMMDD_HHMMSS.log`
- `crypto_YYYYMMDD_HHMMSS.log`
- `db_viewer_YYYYMMDD_HHMMSS.log`

## Особенности

- Гибкий интерфейс с перемещаемыми док-виджетами
- Возможность настройки расположения компонентов
- Все компоненты работают независимо
- Автоматическое создание базы данных
- Мониторинг в реальном времени
- Реализация криптографии без специальных библиотек
- Полностью русскоязычный интерфейс
